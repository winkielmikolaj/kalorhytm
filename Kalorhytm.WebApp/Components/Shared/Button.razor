@* Reusable Button Component
   Features:
   - Consistent styling
   - Multiple variants (Primary, Secondary, Danger, Success)
   - Hover and focus states
   - Loading state support
*@

<button type="@ButtonType" 
        @onclick="OnClick"
        disabled="@(IsDisabled || IsLoading)"
        class="@GetButtonClasses()">
    @if (IsLoading)
    {
        <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
    }
    @ChildContent
</button>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public EventCallback<MouseEventArgs> OnClick { get; set; }
    [Parameter] public ButtonVariant Variant { get; set; } = ButtonVariant.Primary;
    [Parameter] public ButtonType ButtonType { get; set; } = ButtonType.Button;
    [Parameter] public bool IsDisabled { get; set; }
    [Parameter] public bool IsLoading { get; set; }
    [Parameter] public string AdditionalClass { get; set; } = "";

    private string GetButtonClasses()
    {
        var baseClasses = "px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed";
        
        var variantClasses = Variant switch
        {
            ButtonVariant.Primary => "bg-green-500 text-white hover:bg-green-600 focus:ring-green-500 shadow-sm hover:shadow-md",
            ButtonVariant.Secondary => "bg-gray-600 text-white hover:bg-gray-500 focus:ring-gray-500 shadow-sm hover:shadow-md",
            ButtonVariant.Danger => "bg-red-500 text-white hover:bg-red-600 focus:ring-red-500 shadow-sm hover:shadow-md",
            ButtonVariant.Success => "bg-green-500 text-white hover:bg-green-600 focus:ring-green-500 shadow-sm hover:shadow-md",
            ButtonVariant.Outline => "border-2 border-green-500 text-green-500 hover:bg-green-500 hover:text-white focus:ring-green-500",
            _ => "bg-green-500 text-white hover:bg-green-600 focus:ring-green-500 shadow-sm hover:shadow-md"
        };
        
        return $"{baseClasses} {variantClasses} {AdditionalClass}";
    }
}

